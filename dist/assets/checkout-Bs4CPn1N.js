import"./reset-CJzo-h3_.js";/* empty css               */import"./main-CRS-uCLd.js";import{s as E}from"./notification-DfkSIDvh.js";document.addEventListener("DOMContentLoaded",function(){const o=JSON.parse(localStorage.getItem("cart"))||[],c=document.querySelector(".order-items"),l=document.getElementById("subtotal"),i=document.getElementById("total"),a=document.getElementById("place-order-btn"),m=document.querySelectorAll(".payment-option");if(o.length===0){E("Your cart is empty. Redirecting...","info"),setTimeout(()=>{window.location.href="cart.html"},1500);return}function I(){c.innerHTML="";let t=0;o.forEach(e=>{const n=document.createElement("div");n.className="order-item";const r=e.image.includes("cdn.shopclues.com")?"https://images.unsplash.com/photo-1593998066526-65fcab3021a2?w=100&q=80":e.image;n.innerHTML=`
                <div class="item-info">
                    <img src="${r}" alt="${e.title}" class="item-image">
                    <div>
                        <div class="item-name">${e.title}</div>
                        <div class="item-quantity">Qty: ${e.quantity}</div>
                    </div>
                </div>
                <div class="item-price">₹${e.price*e.quantity}</div>
            `,c.appendChild(n),t+=e.price*e.quantity}),l.textContent=`₹${t}`,i.textContent=`₹${t}`}const u=document.getElementById("credit-card-form");a.disabled=!0,m.forEach(t=>{t.addEventListener("click",function(){m.forEach(n=>n.classList.remove("active")),this.classList.add("active"),this.dataset.method==="credit-card"?u.classList.remove("hidden"):u.classList.add("hidden"),d()})});const g=document.getElementById("cardNumber"),p=document.getElementById("cardExpiry"),y=document.getElementById("cardCvv");g&&g.addEventListener("input",function(t){var r;let e=t.target.value.replace(/\D/g,"");e=e.substring(0,16);let n=((r=e.match(/.{1,4}/g))==null?void 0:r.join(" "))||e;t.target.value=n,d()}),p&&p.addEventListener("input",function(t){let e=t.target.value.replace(/\D/g,"");e.length>=2&&(e=e.substring(0,2)+"/"+e.substring(2,4)),t.target.value=e,d()}),y&&y.addEventListener("input",()=>d()),document.querySelectorAll("input, select").forEach(t=>{t.addEventListener("input",d),t.addEventListener("change",d)});function d(){const t=["firstName","lastName","email","address","city","zip","country"];let e=!0;t.forEach(s=>{document.getElementById(s).value.trim()||(e=!1)});const n=document.getElementById("email").value.trim();if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(e=!1),document.querySelector(".payment-option.active").dataset.method==="credit-card"){const s=document.getElementById("cardName").value.trim(),v=document.getElementById("cardNumber").value.replace(/\s/g,""),b=document.getElementById("cardExpiry").value,N=document.getElementById("cardCvv").value;s||(e=!1),v.length!==16&&(e=!1),N.length!==3&&(e=!1),b.length!==5&&(e=!1)}return a.disabled=!e,e}function h(){return"ORD-"+Date.now().toString(36).toUpperCase()}function B(t){return new Promise((e,n)=>{a.classList.add("loading"),a.disabled=!0,a.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processing...',setTimeout(()=>{e()},1500)})}async function L(){if(!d())return;const t=document.querySelector(".payment-option.active").dataset.method;try{await B(t);const e={items:o,shipping:{firstName:document.getElementById("firstName").value,lastName:document.getElementById("lastName").value,email:document.getElementById("email").value,address:document.getElementById("address").value,city:document.getElementById("city").value,zip:document.getElementById("zip").value,country:document.getElementById("country").value},paymentMethod:t,total:parseFloat(i.textContent.replace("₹","")),date:new Date().toISOString(),orderId:h()},n=JSON.parse(localStorage.getItem("orders"))||[];n.push(e),localStorage.setItem("orders",JSON.stringify(n)),localStorage.removeItem("cart"),S(e.orderId)}catch{E("Payment failed. Please try again.","error"),a.classList.remove("loading"),a.disabled=!1,a.innerHTML="Place Order"}}a&&a.addEventListener("click",function(t){a.disabled||(t.preventDefault(),L())}),I();const f=document.getElementById("close-modal-btn");f&&f.addEventListener("click",function(){const t=document.getElementById("orderModal");t.style.display="none",window.location.href="/"})});function S(o){const c=document.getElementById("orderModal"),l=document.getElementById("modalOrderId");l&&(l.textContent=`Order ID: ${o}`),c.style.display="flex"}
