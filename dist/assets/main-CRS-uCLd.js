const u=["https://images.unsplash.com/photo-1441986300917-64674bd600d8?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1483985988355-763728e1935b?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=1200&q=80"];document.addEventListener("DOMContentLoaded",()=>{m(u),g(),p()});function m(o){const n=document.getElementById("slideshow");if(!n)return;let e=0;const t=document.createElement("img");t.style.opacity="0",t.style.transition="opacity 0.5s ease-in-out",t.src=o[0],t.onload=()=>{t.style.opacity="1"},n.innerHTML="",n.appendChild(t),setInterval(()=>{t.style.opacity="0",setTimeout(()=>{e=(e+1)%o.length,t.src=o[e],t.onload=()=>{t.style.opacity="1"}},500)},4e3)}async function p(){try{const n=await(await fetch("https://fakestoreapi.com/products")).json(),e=n.filter(c=>c.category==="women's clothing");r("festival-carousel",e);const t=n.filter(c=>c.category==="jewelery"||c.category==="men's clothing");r("essentials-carousel",t);const s=n.filter(c=>c.category==="electronics");r("gadget-carousel",s)}catch(o){console.error("Failed to load homepage products:",o)}}function r(o,n){const e=document.getElementById(o);e&&(n.forEach(t=>{const s=document.createElement("div");s.className="carousel-cell",s.onclick=()=>window.location.href=`/product-details.html?id=${t.id}`,s.style.cursor="pointer",s.innerHTML=`
            <img src="${t.image}" alt="${t.title}" style="object-fit: contain; padding: 10px; background: white;">
            <div class="product-info">
                <p class="truncate-text" title="${t.title}">${t.title}</p>
                <span class="discount">â‚¹${t.price}</span>
            </div>
        `,e.appendChild(s)}),window.Flickity&&new Flickity(e,{groupCells:!0,cellAlign:"left",contain:!0,pageDots:!1,wrapAround:!0,autoPlay:3e3}))}function g(){const o=JSON.parse(localStorage.getItem("currentUser"));if(!document.getElementById("user-info"))return;const e=document.getElementById("signin-link"),t=document.getElementById("user-logged-in");if(o){if(e&&(e.style.display="none"),t){t.style.display="block";const s=document.getElementById("user-dropdown-btn"),c=document.getElementById("user-dropdown-menu"),l=document.getElementById("logout-btn-action");if(s&&c){const a=s.cloneNode(!0);s.parentNode.replaceChild(a,s),a.addEventListener("click",i=>{i.stopPropagation(),c.classList.toggle("show")}),document.addEventListener("click",i=>{!a.contains(i.target)&&!c.contains(i.target)&&c.classList.remove("show")})}l&&l.addEventListener("click",a=>{a.preventDefault(),localStorage.removeItem("currentUser"),window.location.href="index.html"})}}else e&&(e.style.display="block"),t&&(t.style.display="none")}function d(){const n=(JSON.parse(localStorage.getItem("cart"))||[]).reduce((t,s)=>t+s.quantity,0),e=document.getElementById("cart-count");e&&(e.textContent=n,e.style.display=n>0?"flex":"none")}function f(){const o=document.getElementById("search-form");o&&o.addEventListener("submit",n=>{if(!window.location.pathname.includes("/product.html")){n.preventDefault();const t=document.getElementById("search-input").value.trim();t&&(window.location.href=`/product.html?search=${encodeURIComponent(t)}`)}})}document.addEventListener("DOMContentLoaded",d);document.addEventListener("DOMContentLoaded",f);window.addEventListener("storage",d);export{d as u};
