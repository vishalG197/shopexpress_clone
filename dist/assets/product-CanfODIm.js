import"./reset-CJzo-h3_.js";/* empty css               */import{u as g}from"./main-CRS-uCLd.js";import{s as d}from"./notification-DfkSIDvh.js";let s=JSON.parse(localStorage.getItem("cart"))||[],u=[],c={search:"",categories:["all"],minPrice:0,maxPrice:1/0,sortBy:"default"};document.addEventListener("DOMContentLoaded",()=>{const r=new URLSearchParams(window.location.search),a=r.get("search");if(a){c.search=a.toLowerCase();const t=document.getElementById("search-input");t&&(t.value=a)}const e=r.get("category");e&&(c.categories=[e.toLowerCase()]),p(),f()});async function p(){try{u=await(await fetch("https://fakestoreapi.com/products")).json(),m(),i()}catch(r){console.error("Error fetching data:",r),document.getElementById("product-container").innerHTML=`
            <div style="text-align: center; grid-column: 1/-1; padding: 2rem;">
                <p>Failed to load products. Please try again later.</p>
            </div>
        `,d("Failed to load products","error")}}function m(){const r=document.getElementById("category-filters");if(!r)return;const a=["all",...new Set(u.map(e=>e.category))];r.innerHTML="",a.forEach(e=>{const t=document.createElement("label");t.className="checkbox-label";const o=e.charAt(0).toUpperCase()+e.slice(1),n=c.categories.includes(e.toLowerCase())||e==="all"&&c.categories.includes("all");t.innerHTML=`
            <input type="checkbox" value="${e}" ${n?"checked":""}> ${o}
        `,r.appendChild(t)})}function f(){const r=document.getElementById("search-form");r&&r.addEventListener("submit",n=>{n.preventDefault();const l=document.getElementById("search-input");c.search=l.value.trim().toLowerCase(),i()});const a=document.getElementById("sorting");a&&a.addEventListener("change",n=>{c.sortBy=n.target.value,i()});const e=document.getElementById("category-filters");e&&e.addEventListener("change",n=>{n.target.type==="checkbox"&&(h(n.target),i())});const t=document.getElementById("apply-price");t&&t.addEventListener("click",()=>{const n=document.getElementById("min-price").value,l=document.getElementById("max-price").value;c.minPrice=n?parseFloat(n):0,c.maxPrice=l?parseFloat(l):1/0,i()});const o=document.getElementById("clear-filters");o&&o.addEventListener("click",y)}function h(r){const a=document.querySelectorAll('#category-filters input[type="checkbox"]');if(r.value==="all")r.checked?(a.forEach(e=>{e.value!=="all"&&(e.checked=!1)}),c.categories=["all"]):c.categories=[];else{if(r.checked){const t=document.querySelector('#category-filters input[value="all"]');t&&(t.checked=!1)}const e=Array.from(a).filter(t=>t.checked&&t.value!=="all").map(t=>t.value);if(c.categories=e.length>0?e:["all"],e.length===0){const t=document.querySelector('#category-filters input[value="all"]');t&&(t.checked=!0,c.categories=["all"])}}}function y(){c={search:"",categories:["all"],minPrice:0,maxPrice:1/0,sortBy:"default"},document.getElementById("search-input").value="",document.getElementById("min-price").value="",document.getElementById("max-price").value="",document.getElementById("sorting").value="default",m(),i()}function i(){let r=u.filter(e=>{const t=e.title.toLowerCase().includes(c.search)||e.category.toLowerCase().includes(c.search);let o=!1;c.categories.includes("all")?o=!0:o=c.categories.includes(e.category);const n=e.price>=c.minPrice&&e.price<=c.maxPrice;return t&&o&&n});c.sortBy==="low-high"?r.sort((e,t)=>e.price-t.price):c.sortBy==="high-low"&&r.sort((e,t)=>t.price-e.price);const a=document.getElementById("product-count");a&&(a.textContent=`Showing ${r.length} products`),v(r)}function v(r){const a=document.getElementById("product-container");if(a.innerHTML="",r.length===0){a.innerHTML=`
            <div style="text-align: center; grid-column: 1/-1; padding: 4rem;">
                <i class="fa-solid fa-ghost" style="font-size: 3rem; color: var(--text-light); margin-bottom: 1rem;"></i>
                <p>No products found matching your criteria.</p>
                <button onclick="document.getElementById('clear-filters').click()" style="margin-top: 1rem; color: var(--primary-color); background: none; border: underline; cursor: pointer;">Clear Filters</button>
            </div>
        `;return}r.forEach(e=>{const t=document.createElement("article");t.className="product-card";const o=e.image;t.innerHTML=`
            <div class="product-image-container" onclick="window.location.href='/product-details.html?id=${e.id}'" style="cursor: pointer;">
                 <img src="${o}" alt="${e.title}" class="product-image" loading="lazy" onerror="this.onerror=null; this.src='https://via.placeholder.com/300?text=No+Image'">
            </div>
            <div class="product-info">
                <div class="product-category">${e.category}</div>
                <h3 class="product-title" title="${e.title}" onclick="window.location.href='/product-details.html?id=${e.id}'" style="cursor: pointer;">${e.title}</h3>
                <div class="product-price">â‚¹${e.price}</div>
                <button class="add-to-cart-btn" data-id="${e.id}">
                    <i class="fa-solid fa-cart-plus"></i> Add to Cart
                </button>
            </div>
        `,t.querySelector(".add-to-cart-btn").addEventListener("click",()=>E(e)),a.append(t)})}function E(r){if(s=JSON.parse(localStorage.getItem("cart"))||[],s.some(a=>a.id===r.id)){d("This product is already in your cart.","info");return}s.push({...r,quantity:1}),localStorage.setItem("cart",JSON.stringify(s)),window.dispatchEvent(new Event("storage")),g(),d("Product added to cart!","success")}
